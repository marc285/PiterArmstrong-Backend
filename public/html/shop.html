<!DOCTYPE html>
<html lang="en" class="no-js">
    <head>

        <meta charset="utf-8">
        <title>Tienda</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href= "../css/bootstrap.shop.css" >
        <link rel="stylesheet" href= "../css/bootstrap.min.css" >
        <link rel="shortcut icon" href="../imagenes/casco.png" />
        
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

     
    </head>
    <body>
        <nav class="navbar navbar-expand-lg navbar navbar-dark bg-dark">
            <a class="navbar-brand" href="index2.html">
              <img src="../imagenes/casco.png" alt="" style="width:40px;" href="index2.html">
              <img src="../imagenes/piter.png" alt="" style="width:160px;" href="index2.html">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link" href="#">Tienda</a>
                <li class="nav-item">
                  <a class="nav-link" href="accountmanagement.html"> Atrás </a>
                </li>
              </ul>
            </div>
          </nav>
          


          <div class="container">
            <h1>Tienda</h1>
            <br>
            <br>
            <h3>Vida:</h3>
            <br>

            <div class="row">
              <div class="col-sm-3">
                     
                <div class="image">
                  <img class="image" src="../imagenes/25vida.png" alt="" >
                <div class="btn-group">
                  <button type="button" name="button"  class="btn precio-btn">25</button>
                  <button type="button" style="margin-left: 15px" name="button" id="precio25"  class="btn comprar-btn">Comprar</button>
                </div>
                <div class="panel-footer">Este sandwich de helado de galletas con crema aumenta la vida de Piter en 25 puntos.</div>
                </div>
                   
            </div>

                <div class="col-sm-3">
                     
                    <div class="image">
                      <img class="image" src="../imagenes/50vida.png" alt="" >
                    <div class="btn-group">
                      <button type="button" name="button"  class="btn precio-btn">50</button>
                      <button type="button" style="margin-left: 15px" name="button" id="precio50" class="btn comprar-btn">Comprar</button>
                    </div>
                    <div class="panel-footer">Este sandwich de helado de menta con trozitos de chocolate aumenta la vida de Piter en 50 puntos.</div>
                    </div>
                </div>

                <div class="col-sm-3">
                     
                    <div class="image">
                      <img class="image" src="../imagenes/75vida.png" alt="" >
                    <div class="btn-group">
                      <button type="button" name="button" class="btn precio-btn">75</button>
                      <button type="button" style="margin-left: 15px" name="button" id="precio75" class="btn comprar-btn">Comprar</button>
                    </div>
                    <div class="panel-footer">Este sandwich de helado napolitano aumenta la vida de Piter en 75 puntos.</div>
                    </div>
                </div>

                <div class="col-sm-3">
                     
                    <div class="image">
                      <img class="image" src="../imagenes/110vida.png" alt="" >
                    <div class="btn-group">
                      <button type="button" name="button"  class="btn precio-btn">100</button>
                      <button type="button" style="margin-left: 15px" name="button" id="precio100"  class="btn comprar-btn">Comprar</button>
                    </div>
                    <div class="panel-footer">Estas bolsa con bananas deshidratadas aumenta la vida de Piter en 100 puntos.</div>
                    </div>
                </div>
                </div>









                <br>
                <br>
                <br>
                <h3>Armas:</h3>
            <br>

            <div class="row">
              <div class="col-sm-3">
                     
                <div class="image">
                  <img class="image" src="../imagenes/llave.png" alt="" >
                <div class="btn-group">
                  <button type="button" name="button"  class="btn precio-btn">20</button>
                  <button type="button" style="margin-left: 15px" name="button" id="precio20" class="btn comprar-btn">Comprar</button>
                </div>
                <div class="panel-footer">Cuenta la leyenda que con esta llave inglesa se repararon muchos satélites rusos, Piter mejora su ataque en 10 puntos.</div>
                </div>
                   
            </div>

                <div class="col-sm-3">
                     
                    <div class="image">
                      <img class="image" src="../imagenes/palanca.png" alt="" >
                    <div class="btn-group">
                      <button type="button" name="button"  class="btn precio-btn">35</button>
                      <button type="button" style="margin-left: 15px" name="button" id="precio35" class="btn comprar-btn">Comprar</button>
                    </div>
                    <div class="panel-footer">Esta palanca se utilizó para reformar el edificio actual de la NASA, Piter mejora su ataque en 20 puntos.</div>
                    </div>
                </div>

                <div class="col-sm-3">
                     
                    <div class="image">
                      <img class="image" src="../imagenes/llavecarraca.png" alt="" >
                    <div class="btn-group">
                      <button type="button" name="button"  class="btn precio-btn">70</button>
                      <button type="button" style="margin-left: 15px" name="button" id="precio70" class="btn comprar-btn">Comprar</button>
                    </div>
                    <div class="panel-footer">Esta llave dinamométrica ha sido utilizada para las reparaciones de motores de la ISS, Piter mejora su ataque en 30 puntos.</div>
                    </div>
                </div>

                <div class="col-sm-3">
                     
                    <div class="image">
                      <img class="image" src="../imagenes/taladro.png" alt="" >
                    <div class="btn-group">
                      <button type="button" name="button"  class="btn precio-btn">90</button>
                      <button type="button" style="margin-left: 15px" name="button" id="precio90" class="btn comprar-btn">Comprar</button>
                    </div>
                    <div class="panel-footer">Con las baterías cargadas se convierte en un arma temible, Piter mejora su ataque en 50 puntos.</div>
                    </div>
                </div>
                </div>



                <br>
                <br>
                <br>
                <h3>Armadura:</h3>
            <br>

            <div class="row">
              <div class="col-sm-3">
                     
                <div class="image">
                  <img class="image" src="../imagenes/helmet.png" alt="" >
                <div class="btn-group">
                  <button type="button" name="button"  class="btn precio-btn">30</button>
                  <button type="button" style="margin-left: 15px" name="button" id="precio30" class="btn comprar-btn">Comprar</button>
                </div>
                <div class="panel-footer">Este casco utilizado por numerosos astronautas durante las misiones mejora la defensa de Piter en 15 puntos.</div>
                </div>
                   
            </div>

                <div class="col-sm-3">
                     
                    <div class="image">
                      <img class="image" src="../imagenes/escafandra.png" alt="" >
                    <div class="btn-group">
                      <button type="button" name="button"  class="btn precio-btn">45</button>
                      <button type="button" style="margin-left: 15px" name="button"  id="precio45" class="btn comprar-btn">Comprar</button>
                    </div>
                    <div class="panel-footer">La escafandra de buzo vintage de latón incrementa la defensa de Piter en 35 puntos.</div>
                    </div>
                </div>

                <div class="col-sm-3">
                     
                    <div class="image">
                      <img class="image" src="../imagenes/traje.png" alt="" >
                    <div class="btn-group">
                      <button type="button" name="button" class="btn precio-btn">80</button>
                      <button type="button" style="margin-left: 15px" name="button" id="precio80" class="btn comprar-btn">Comprar</button>
                    </div>
                    <div class="panel-footer">El traje de supervivencia interior con protección térmica aumenta la defensa 80 puntos.</div>
                    </div>
                </div>

                <div class="col-sm-3">
                     
                    <div class="image">
                      <img class="image" src="../imagenes/trajeastro.png" alt="" >
                    <div class="btn-group">
                      <button type="button" name="button"  class="btn precio-btn">150</button>
                      <button type="button" style="margin-left: 15px" name="button" id="precio150" class="btn comprar-btn">Comprar</button>
                    </div>
                    <div class="panel-footer">Traje leyenda de Piter Armstrong, la defensa del jugador aumenta en 150 puntos.</div>
                    </div>
                </div>
                </div>
          </div>
<script>
var BASE_URI="http://localhost:8080/dsaApp/"

$(document).ready(function(){
var user; var nombre = window.localStorage.getItem("username");


var precio25 = 25; var vida25= 25; var precio50 = 50; var vida50= 50;
var precio75 = 75; var vida75= 75; var precio100 = 100; var vida100= 100;

var precio20 = 20; var ataque10= 10; var precio35 = 35; var ataque20= 20;
var precio70 = 70; var ataque10= 30; var precio90 = 90; var ataque50= 50;

var precio30 = 30; var defensa15= 15; var precio45 = 45; var defensa35= 35;
var precio80 = 80; var defensa80= 80; var precio150 = 150; var defensa150= 150;

            $.get("http://localhost:8080/dsaApp/usermanager/users/"+ nombre, function(data, status) {
            var username1;  var password1; var attack; var defense;  var health; var money; var pieces; var screen;

                              username1 =  data.username;
                              password1 = data.password;
                              attack = data.attack;
                              defense = data.defense;
                              health = data.health;
                              money = data.money;
                              pieces = data.pieces;
                              screen = data.screen;

           $("#precio25").click(function(){
            if (money>=25){
            health = health + vida25;
            money = money - precio25;
            var user = {"username": username1, "password": password1, "health": health, "defense": defense, "attack": attack, "money": money, "pieces": pieces, "screen": screen};
                        console.log(user);
             alert("Te quedan: " + money + " monedas");
            $.ajax({
            url: BASE_URI.concat("usermanager/users/" + nombre +"/update"),
            headers: { 'content-type': 'application/json',"x-kii-appid": "XXXXX","x-kii-appkey":"XXXXX" },
            method: 'POST',
            dataType: 'json',
            data: JSON.stringify(user),
            success: function (data) {
                var url = "http://localhost:8080/html/index2.html";
                window.open(url, "_self");
                alert(data)
            },
            error: function (e) {
                 // log error in browser
                console.log(e.message);
            }
        });
            }
            else
            alert("No tienes suficiente money");
            });

           $("#precio50").click(function(){
           if (money>=50){
           health = health + vida50;
           money = money - precio50;
           var user = {"username": username1, "password": password1, "health": health, "defense": defense, "attack": attack, "money": money, "pieces": pieces, "screen": screen};
                       console.log(user);
            $.ajax({
            url: BASE_URI.concat("usermanager/users/" + nombre +"/update"),
            headers: { 'content-type': 'application/json',"x-kii-appid": "XXXXX","x-kii-appkey":"XXXXX" },
            method: 'POST',
            dataType: 'json',
            data: JSON.stringify(user),
            success: function (data) {
                var url = "http://localhost:8080/html/index2.html";
                window.open(url, "_self");
                alert(data)
            },
            error: function (e) {
                 // log error in browser
                console.log(e.message);
            }
        });
           }
           else
           alert("No tienes suficiente money");
           });

           $("#precio75").click(function(){
           if (money>=75){
           health = health + vida75;
           money = money - precio75;
           var user = {"username": username1, "password": password1, "health": health, "defense": defense, "attack": attack, "money": money, "pieces": pieces, "screen": screen};
                       console.log(user);

           $.ajax({
            url: BASE_URI.concat("usermanager/users/" + nombre +"/update"),
            headers: { 'content-type': 'application/json',"x-kii-appid": "XXXXX","x-kii-appkey":"XXXXX" },
            method: 'POST',
            dataType: 'json',
            data: JSON.stringify(user),
            success: function (data) {
                var url = "http://localhost:8080/html/index2.html";
                window.open(url, "_self");
                alert(data)
            },
            error: function (e) {
                 // log error in browser
                console.log(e.message);
            }
        });
        }
           else
           alert("No tienes suficiente money");
           });

           $("#precio100").click(function(){
           if (money>=100){
           health = health + vida100;
           money = money - precio100;
           var user = {"username": username1, "password": password1, "health": health, "defense": defense, "attack": attack, "money": money, "pieces": pieces, "screen": screen};
                       console.log(user);
           }
           else
           alert("No tienes suficiente money");
           });

           $("#precio20").click(function(){
           if (money>=20){
           attack = attack + ataque10;
           money = money - precio20;
           var user = {"username": username1, "password": password1, "health": health, "defense": defense, "attack": attack, "money": money, "pieces": pieces, "screen": screen};
                       console.log(user);
           $.ajax({
            url: BASE_URI.concat("usermanager/users/" + nombre +"/update"),
            headers: { 'content-type': 'application/json',"x-kii-appid": "XXXXX","x-kii-appkey":"XXXXX" },
            method: 'POST',
            dataType: 'json',
            data: JSON.stringify(user),
            success: function (data) {
                var url = "http://localhost:8080/html/index2.html";
                window.open(url, "_self");
                alert(data)
            },
            error: function (e) {
                 // log error in browser
                console.log(e.message);
            }
        });
           }
           else
           alert("No tienes suficiente money");
           });


           $("#precio35").click(function(){
           if (money>=35){
           attack = attack + ataque20;
           money = money - precio35;
           var user = {"username": username1, "password": password1, "health": health, "defense": defense, "attack": attack, "money": money, "pieces": pieces, "screen": screen};
                  console.log(user);
           $.ajax({
            url: BASE_URI.concat("usermanager/users/" + nombre +"/update"),
            headers: { 'content-type': 'application/json',"x-kii-appid": "XXXXX","x-kii-appkey":"XXXXX" },
            method: 'POST',
            dataType: 'json',
            data: JSON.stringify(user),
            success: function (data) {
                var url = "http://localhost:8080/html/index2.html";
                window.open(url, "_self");
                alert(data)
            },
            error: function (e) {
                 // log error in browser
                console.log(e.message);
            }
        });
           }
           else
           alert("No tienes suficiente money");
           });

           $("#precio70").click(function(){
           if (money>=70){
           attack = attack + ataque30;
           money = money - precio70;
           var user = {"username": username1, "password": password1, "health": health, "defense": defense, "attack": attack, "money": money, "pieces": pieces, "screen": screen};
                  console.log(user);
           $.ajax({
            url: BASE_URI.concat("usermanager/users/" + nombre +"/update"),
            headers: { 'content-type': 'application/json',"x-kii-appid": "XXXXX","x-kii-appkey":"XXXXX" },
            method: 'POST',
            dataType: 'json',
            data: JSON.stringify(user),
            success: function (data) {
                var url = "http://localhost:8080/html/index2.html";
                window.open(url, "_self");
                alert(data)
            },
            error: function (e) {
                 // log error in browser
                console.log(e.message);
            }
        });
           }
           else
           alert("No tienes suficiente money");
           });

           $("#precio90").click(function(){
           if (money>=90){
           attack = attack + ataque50;
           money = money - precio90;
           var user = {"username": username1, "password": password1, "health": health, "defense": defense, "attack": attack, "money": money, "pieces": pieces, "screen": screen};
                console.log(user);
           $.ajax({
            url: BASE_URI.concat("usermanager/users/" + nombre +"/update"),
            headers: { 'content-type': 'application/json',"x-kii-appid": "XXXXX","x-kii-appkey":"XXXXX" },
            method: 'POST',
            dataType: 'json',
            data: JSON.stringify(user),
            success: function (data) {
                var url = "http://localhost:8080/html/index2.html";
                window.open(url, "_self");
                alert(data)
            },
            error: function (e) {
                 // log error in browser
                console.log(e.message);
            }
        });
           }
           else
           alert("No tienes suficiente money");
           });


           $("#precio30").click(function(){
           if (money>=30){
           defense = defense + defensa15;
           money = money - precio30;
           var user = {"username": username1, "password": password1, "health": health, "defense": defense, "attack": attack, "money": money, "pieces": pieces, "screen": screen};
                 console.log(user);
           $.ajax({
            url: BASE_URI.concat("usermanager/users/" + nombre +"/update"),
            headers: { 'content-type': 'application/json',"x-kii-appid": "XXXXX","x-kii-appkey":"XXXXX" },
            method: 'POST',
            dataType: 'json',
            data: JSON.stringify(user),
            success: function (data) {
                var url = "http://localhost:8080/html/index2.html";
                window.open(url, "_self");
                alert(data)
            },
            error: function (e) {
                 // log error in browser
                console.log(e.message);
            }
        });
           }
           else
           alert("No tienes suficiente money");
           });
            $("#precio45").click(function(){
            if (money>=45){
            defense = defense + defensa35;
            money = money - precio45;
            var user = {"username": username1, "password": password1, "health": health, "defense": defense, "attack": attack, "money": money, "pieces": pieces, "screen": screen};
                 console.log(user);
            $.ajax({
            url: BASE_URI.concat("usermanager/users/" + nombre +"/update"),
            headers: { 'content-type': 'application/json',"x-kii-appid": "XXXXX","x-kii-appkey":"XXXXX" },
            method: 'POST',
            dataType: 'json',
            data: JSON.stringify(user),
            success: function (data) {
                var url = "http://localhost:8080/html/index2.html";
                window.open(url, "_self");
                alert(data)
            },
            error: function (e) {
                 // log error in browser
                console.log(e.message);
            }
        });
            }
            else
            alert("No tienes suficiente money");
            });
            $("#precio80").click(function(){
            if (money>=80){
            defense = defense + defensa80;
            money = money - precio80;
            var user = {"username": username1, "password": password1, "health": health, "defense": defense, "attack": attack, "money": money, "pieces": pieces, "screen": screen};
                  console.log(user);
            $.ajax({
            url: BASE_URI.concat("usermanager/users/" + nombre +"/update"),
            headers: { 'content-type': 'application/json',"x-kii-appid": "XXXXX","x-kii-appkey":"XXXXX" },
            method: 'POST',
            dataType: 'json',
            data: JSON.stringify(user),
            success: function (data) {
                var url = "http://localhost:8080/html/index2.html";
                window.open(url, "_self");
                alert(data)
            },
            error: function (e) {
                 // log error in browser
                console.log(e.message);
            }
        });
            }
            else
            alert("No tienes suficiente money");
            });
            $("#precio150").click(function(){
            if (money>=150){
            defense = defense + defensa150;
            money = money - precio150;
            var user = {"username": username1, "password": password1, "health": health, "defense": defense, "attack": attack, "money": money, "pieces": pieces, "screen": screen};
                 console.log(user);
            $.ajax({
            url: BASE_URI.concat("usermanager/users/" + nombre +"/update"),
            headers: { 'content-type': 'application/json',"x-kii-appid": "XXXXX","x-kii-appkey":"XXXXX" },
            method: 'POST',
            dataType: 'json',
            data: JSON.stringify(user),
            success: function (data) {
                var url = "http://localhost:8080/html/index2.html";
                window.open(url, "_self");
                alert(data)
            },
            error: function (e) {
                 // log error in browser
                console.log(e.message);
            }
        });
            }
            else
            alert("No tienes suficiente money");
            });



            alert("Tu saldo es de:" + money);
$.ajax({
            url: BASE_URI.concat("usermanager/users/" + nombre +"/update"),
            headers: { 'content-type': 'application/json',"x-kii-appid": "XXXXX","x-kii-appkey":"XXXXX" },
            method: 'POST',
            dataType: 'json',
            data: JSON.stringify(user),
            success: function (data) {
                var url = "http://localhost:8080/html/index2.html";
                window.open(url, "_self");
                alert(data)
            },
            error: function (e) {
                 // log error in browser
                console.log(e.message);
            }


        });

    });
});
</script>

    </body>
    </html>